<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="author" content="mironcoder"/>
    <meta name="email" content="mironcoder@gmail.com"/>
    <meta name="profile" content="https://themeforest.net/user/mironcoder"/>
    <meta name="template" content="greeny"/>
    <meta name="title" content="greeny - Ecommerce Food Store HTML Template"/>
    <meta name="keywords" content="organic, food, shop, ecommerce, store, html, bootstrap, template, agriculture, vegetables, products, farm, grocery, natural, online"/>
    <title>Document Management System</title>
    <link rel="icon" href="images/favicon.png"/>
    <link rel="stylesheet" href="fonts/flaticon/flaticon.css"/>
    <link rel="stylesheet" href="fonts/icofont/icofont.min.css"/>
    <link rel="stylesheet" href="fonts/fontawesome/fontawesome.min.css"/>
    <link rel="stylesheet" href="vendor/venobox/venobox.min.css"/>
    <link rel="stylesheet" href="vendor/slickslider/slick.min.css"/>
    <link rel="stylesheet" href="vendor/niceselect/nice-select.min.css"/>
    <link rel="stylesheet" href="vendor/bootstrap/bootstrap.min.css"/>
    <link rel="stylesheet" href="css/main.css"/>
    <link rel="stylesheet" href="css/wishlist.css"/>
</head>
<body>

<header th:replace="~{/web/fragments/header :: header}"></header>

<section class="inner-section single-banner" style="background: url(images/hethongQuanLy.png) no-repeat center">
    <div class="container">
        <h2>Danh sách các tài liệu được đăng tải của bạn</h2>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a th:href="@{/}">Trang chủ</a></li>
        </ol>
    </div>
</section>

<section class="inner-section wishlist-part">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-12 d-flex justify-content-end">
                <button class="btn btn-primary btn-round ml-auto" data-toggle="modal" data-target="#addRowModal">
                    <i class="fa fa-plus"></i> Thêm mới
                </button>
            </div>
            <div class="col-lg-12 d-flex justify-content-center">
                <div class="table-scroll">
                    <div th:if="${totalDocumentUpload == 0}" class="text-center">
                        <th:block th:if="${user.email != null}">
                            <h3 style="color: #119744" class="mt-5">Hiện tại bạn chưa đăng tài liệu nào!</h3>
                            <h4 style="color: #119744">Hãy thêm các tài liệu bạn muốn nào!</h4>
                            <a th:href="@{/uploadDocument}" style="text-decoration: underline;">Click tại đây!</a>
                        </th:block>
                    </div>
                    <table class="table-list" th:if="${totalDocumentUpload != 0}">
                        <thead>
                        <tr>
                            <th scope="col">Mã tài liệu</th>
                            <th scope="col">Ảnh</th>
                            <th scope="col">File</th>
                            <th scope="col">Tên tài liệu</th>
                            <th scope="col">Người đăng tải</th>
                            <th scope="col">Tên thư mục</th>
                            <th scope="col">Ngày thêm</th>
                            <th scope="col">Trạng thái</th>
                            <th scope="col">Mô tả tài liệu</th>
                            <th scope="col" style="width: 10%">Hành động</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="item : ${documents}">
                            <td class="table-serial"><h6>[[${item.id}]]</h6></td>
                            <td class="table-image">
                                <img th:src="@{'/loadImage?imageName='+${item.documentImage}}" alt="document"/>
                            </td>
                            <td>
                                <object th:data="@{'/loadFile?fileName='+${item.documentFile}}"
                                        type="application/pdf, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.openxmlformats-officedocument.presentationml.presentation, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
                                        width="100%" height="600px">
                                    <a th:href="@{'/loadFile?fileName=' + ${item.documentFile}}"> Xem tài liệu</a>
                                </object>
                            </td>
                            <td class="table-name"><h6>[[${item.documentName}]]</h6></td>
                            <td class="table-price"><h6>[[${item.user.name}]]</h6></td>
                            <td class="table-folder"><h6>[[${item.folder.folderName}]]</h6></td>
                            <td class="table-uploadDate"><h6>[[${item.uploadDate}]]</h6></td>
                            <td class="table-status"><h6>[[${item.documentStatus.statusName}]]</h6></td>
                            <td class="table-description"><h6>[[${item.description}]]</h6></td>
                            <td class="table-action">
                                <a class="view" th:href="@{/documentDetails(id=${item.id})}" title="Chi tiết tài liệu">
                                    <i class="fas fa-eye"></i>
                                </a>
                                <a class="trash" th:href="@{/editDocumentUpload(id=${item.id})}" title="Sửa tài liệu">
                                    <i class="icofont-trash"></i>
                                </a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</section>

<div class="modal fade" id="addRowModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 1200px; margin-left: -300px; margin-top: 50px;">
            <div class="modal-header no-bd">
                <h5 class="modal-title">
                    <span class="fw-mediumbold" style="text-decoration: underline; color: black;">
                        Thêm mới tài liệu
                    </span>
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form th:action="@{/uploadDocument}" th:object="${document}" method="post" enctype="multipart/form-data">
                    <div class="row">
                        <div class="col-md-3 pr-0">
                            <div class="form-group form-group-default">
                                <label>Tên tài liệu <span style="color: red">*</span></label>
                                <input th:field="*{documentName}" id="documentName" type="text" class="form-control" placeholder="Tên tài liệu...">
                            </div>
                        </div>
                        <div class="col-md-3 pr-0">
                            <div class="form-group form-group-default">
                                <label>Thư mục <span style="color: red">*</span></label>
                                <input th:field="*{folder.folderName}" id="folderName" type="text" class="form-control" placeholder="Thư mục...">
                            </div>
                        </div>
                        <div class="col-md-3 pr-0">
                            <div class="form-group form-group-default">
                                <label>Người đăng tải <span style="color: red">*</span></label>
                                <input th:field="*{user.name}" id="name" type="text" class="form-control" placeholder="Người đăng tải...">
                            </div>
                        </div>
                        <div class="col-md-3 pr-0">
                            <div class="form-group form-group-default">
                                <label>Ngày thêm <span style="color: red">*</span></label>
                                <input th:field="*{uploadDate}" id="enteredDate" type="date" class="form-control" placeholder="Ngày thêm">
                            </div>
                        </div>
                        <div class="col-md-9 pr-0">
                            <div class="form-group form-group-default">
                                <label>Hình ảnh <span style="color: red">*</span></label>
                                <input th:field="*{documentImage}" type="file" id="documentImage" name="file" class="form-control">
                            </div>
                        </div>
                        <div class="col-md-9 pr-0">
                            <div class="form-group form-group-default">
                                <label>File <span style="color: red">*</span></label>
                                <input th:field="*{documentFile}" type="file" id="documentFile" name="file" class="form-control">
                            </div>
                        </div>
                        <div class="col-md-12 pr-0">
                            <div class="form-group form-group-default">
                                <label>Mô tả tài liệu <span style="color: red">*</span></label>
                                <textarea th:field="*{description}" id="description" class="form-control" placeholder="Mô tả tài liệu..."></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer no-bd">
                        <button type="submit" class="btn btn-primary">Thêm mới</button>
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Hủy</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="vendor/jquery/jquery-3.6.0.min.js"></script>
<script src="vendor/bootstrap/popper.min.js"></script>
<script src="vendor/bootstrap/bootstrap.min.js"></script>
<script src="vendor/slickslider/slick.min.js"></script>
<script src="vendor/venobox/venobox.min.js"></script>
<script src="vendor/niceselect/nice-select.min.js"></script>
<script src="js/main.js"></script>

</body>
</html>
